[general]
server_check_url=http://cp.cloudflare.com/generate_204
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js
; geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/GeoLocationChecker/QuantumultX/IP-API.js
dns_exclusion_list=*.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me
excluded_routes=239.255.255.250/32
# 参数 udp_whitelist 从 IP 层控制 UDP 数据是否需要舍弃；如舍弃，则该 UDP 请求不会进入规则模块以及策略模块，TCP/UDP 请求记录中也不会有相应的条目，但仍可在日志中查询到相关信息（日志等级 debug）。
# 该参数控制的是流入 Quantumult X Tunnel 的请求，并非 Quantumult X Tunnel 发出的请求，即不会作用于节点所使用的 UDP 目标端口。
;udp_whitelist=53, 123, 1900, 80-443
udp_whitelist=1-442, 444-65535
# 注意：如果您需要调整该参数的值为 direct，请务必清楚了解同一目标主机名 TCP 请求与 UDP 请求的源地址不同所造成的隐私及安全风险。
fallback_udp_policy=direct

[dns]
no-ipv6
# Apple TestFlight
server=/*testflight.apple.com/8.8.4.4

[policy]
static=Global, 自动选择, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点,韩国节点, direct, proxy, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/Global.png
static=Telegram, Global, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点,韩国节点, direct, proxy, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/Telegram.png
static=Netflix, Global, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点,韩国节点, direct, proxy,  img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/Netflix.png
static=Spotify, Global, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点,韩国节点, direct, proxy,  img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/Spotify.png
static=Apple, Global, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点, direct, proxy, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/Apple.png
static=YouTube, Global, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点, direct, proxy, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/YouTube.png
static=TikTok, Global, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点, direct, proxy, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/TikTok.png
static=Google, Global, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点, direct, proxy, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/Google.png
static=Netease, 网易云音乐解锁节点, direct, proxy, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Netease.png


static=Final, Global, direct, proxy, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/Final.png
url-latency-benchmark=自动选择, resource-tag-regex=.*, check-interval=300, tolerance=50, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/Select.png
url-latency-benchmark=香港节点, server-tag-regex=(?=.*(港|HK|(?i)Hong))^((?!(台|日|韩|新|美)).)*$, check-interval=300, tolerance=50, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/HK.png
url-latency-benchmark=台湾节点, server-tag-regex=(?=.*(台|TW|(?i)Taiwan))^((?!(港|日|韩|新|美)).)*$, check-interval=300, tolerance=50, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/TW.png
url-latency-benchmark=日本节点, server-tag-regex=(?=.*(日|JP|(?i)Japan))^((?!(港|台|韩|新|美)).)*$, check-interval=300, tolerance=50, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/JP.png
url-latency-benchmark=狮城节点, server-tag-regex=(?=.*(新|狮|獅|SG|(?i)Singapore))^((?!(港|台|日|韩|美)).)*$, check-interval=300, tolerance=50, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/SG.png
url-latency-benchmark=美国节点, server-tag-regex=(?=.*(美|US|(?i)States|American))^((?!(港|台|日|韩|新)).)*$, check-interval=300, tolerance=50, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/US.png
url-latency-benchmark=韩国节点, server-tag-regex=(?=.*(韩|KR|(?i)States|American))^((?!(港|台|日|美|新)).)*$, check-interval=300, tolerance=50, img-url=https://raw.githubusercontent.com/howecheung/QuantumultX-icons/master/KR.png

[server_remote]
https://raw.githubusercontent.com/Jsnzkpg/Jsnzkpg/Jsnzkpg/Jsnzkpg, tag=长久鸡, update-interval=86400, opt-parser=true, enabled=true

[filter_remote]
# 后续规则修正
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list, tag=后续规则修正, force-policy=direct, update-interval=86400, opt-parser=true, enabled=true
# 广告拦截
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Advertising.list, tag=广告拦截, force-policy=reject, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/AdvertisingPlus.list#type=domain-set, tag=Advertising+, force-policy=reject, update-interval=86400, opt-parser=true, enabled=true
# 隐私保护
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Privacy.list, tag=隐私保护, force-policy=Guard, update-interval=86400, opt-parser=true, enabled=true
# 运营商劫持或恶意网站
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Hijacking.list, tag=运营商劫持或恶意网站, force-policy=Guard, update-interval=86400, opt-parser=true, enabled=true
# 中国直连（filter_local已启用geoip, cn, direct）
#https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list, tag=中国直连, force-policy=direct, update-interval=86400, opt-parser=true, enabled=true
# Spotify
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Music/Spotify.list, tag=Spotify, force-policy=Spotify, update-interval=86400, opt-parser=true, enabled=true
# YouTube
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Video/YouTube.list, tag=油管, force-policy=YouTube, update-interval=86400, opt-parser=true, enabled=true
# Telegram服务
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Telegram/Telegram.list, tag=电报, force-policy=Telegram, update-interval=86400, opt-parser=true, enabled=true
# Netflix
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Video/Netflix.list, tag=奈飞, force-policy=Netflix, update-interval=86400, opt-parser=true, enabled=true
# Apple 服务
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Apple/Apple.list, tag=苹果, force-policy=Apple, update-interval=86400, opt-parser=true, enabled=true
# TikTok 服务
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/TikTok/TikTok.list, tag=抖音, force-policy=TikTok, update-interval=86400, opt-parser=true, enabled=true
# Google 服务
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Google/Google.list, tag=谷歌, force-policy=Google, update-interval=86400, opt-parser=true, enabled=true
# 网易云音乐服务
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Netease/Netease.list, tag=网易云音乐, force-policy=Netease, update-interval=86400, opt-parser=true, enabled=true
# 全球加速
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list, tag=全球加速, force-policy=Global, update-interval=86400, opt-parser=true, enabled=true
#各个国家媒体分流
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/HK.list, tag=流媒体HK, force-policy=香港节点, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/TW.list, tag=流媒体TW, force-policy=台湾节点, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/JP.list, tag=流媒体JP, force-policy=日本节点, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/US.list, tag=流媒体US, force-policy=美国节点, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/SG.list, tag=流媒体SG, force-policy=狮城节点, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/KR.list, tag=流媒体KR, force-policy=韩国节点, update-interval=86400, opt-parser=true, enabled=true

[rewrite_remote]
# 神机复写
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/General.conf, tag=神机复写, update-interval=86400, enabled=true
# 神机去广告
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/Advertising.conf, tag=神机去广告, update-interval=86400, enabled=true
# 解锁完整的Apple搜索功能和集成服务
https://raw.githubusercontent.com/VirgilClyne/iRingo/main/qxrewrite/Siri.qxrewrite, tag=解锁Apple搜索功能, update-interval=86400, enabled=true
# iRingo for Apple Weather
https://raw.githubusercontent.com/VirgilClyne/iRingo/main/qxrewrite/Weather.qxrewrite, tag=iRingo for Apple Weather, update-interval=86400, enabled=true
# iRingo for Location Services
https://raw.githubusercontent.com/VirgilClyne/iRingo/main/qxrewrite/Location.qxrewrite, tag=iRingo for Location Services, update-interval=86400, opt-parser=false, enabled=true
# BoxJs
# iRingo.boxjs.json : https://raw.githubusercontent.com/VirgilClyne/iRingo/main/box/iRingo.boxjs.json
https://github.com/chavyleung/scripts/raw/master/box/rewrite/boxjs.rewrite.quanx.conf, tag=boxjs, update-interval=86400, opt-parser=false, enabled=true
# NobyDa去广告
https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/Rewrite_lhie1.conf, tag=NobyDa去广告, update-interval=86400, enabled=true
# YouTube去广告
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/YouTubeAds.conf, tag=YouTube去广告, update-interval=86400, enabled=true
# 微信解锁屏蔽URL
https://raw.githubusercontent.com/zZPiglet/Task/master/UnblockURLinWeChat.conf, tag=微信解锁被屏蔽的URL@zZPiglet, update-interval=86400, opt-parser=false, enabled=true
# 微博去广告
https://github.com/zmqcherish/proxy-script/raw/main/weibo.conf, tag=微博去广告@zmqcherish, update-interval=86400, opt-parser=false, enabled=true





https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/GetCookie/GetCookie.conf, tag=获取签到脚本Cookie, update-interval=86400, opt-parser=true, enabled=true


[server_local]
#解锁网易云音乐节点
http=106.52.127.72:19951, fast-open=false, udp-relay=false, tag= 网易云音乐解锁节点

[filter_local]
# Local Area Network 局域网
host-suffix, local, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 100.64.0.0/10, direct
ip-cidr, 224.0.0.0/4, direct
ip6-cidr, fe80::/10, direct
# Safari 防跳转
host, app-site-association.cdn-apple.com, reject
# GeoIP China(若启用，则禁用 ChinaIP.list)
geoip, cn, direct
final, Final

[rewrite_local]
# 微博去广告
^https?://(sdk|wb)app.uve.weibo.com(/interface/sdk/sdkad.php|/wbapplua/wbpullad.lua) url script-response-body https://raw.githubusercontent.com/yichahucha/surge/master/wb_launch.js
^https?://m?api\.weibo\.c(n|om)/2/(statuses/(unread|extend|positives/get|(friends|video)(/|_)(mix)?timeline)|stories/(video_stream|home_list)|(groups|fangle)/timeline|profile/statuses|comments/build_comments|photo/recommend_list|service/picfeed|searchall|cardlist|page|!/photos/pic_recommend_status|video/tiny_stream_video_list|photo/info) url script-response-body https://raw.githubusercontent.com/yichahucha/surge/master/wb_ad.js
# 微信去除公众号文章底部广告
^https?:\/\/mp\.weixin\.qq\.com\/mp\/getappmsgad url script-response-body https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/File/Wechat.js
# 解除微信链接限制
^https\:\/\/(weixin110\.qq|security.wechat)\.com\/cgi-bin\/mmspamsupport-bin\/newredirectconfirmcgi\? url script-response-body https://raw.githubusercontent.com/zZPiglet/Task/master/asset/UnblockURLinWeChat.js
# 酷我音乐SVIP
^https?:\/\/vip1\.kuwo\.cn\/(vip\/v2\/user\/vip|vip\/spi/mservice) url script-response-body https://raw.githubusercontent.com/NobyDa/Script/master/Surge/JS/Kuwo.js
# Safari全能搜索
# > 以下为Safari全能搜索、需要把Safari的搜索引擎设置为：DuckDuckGo
#gm   (Google图片)
^https:\/\/duckduckgo.com\/\?q=gm\+([^&]+).+ url 302 https://www.google.com/search?&tbm=isch&q=$1
# gh   (GitHub)
^https:\/\/duckduckgo.com\/\?q=gh\+([^&]+).+ url 302 https://github.com/search?q=$1
# tf  (Google 搜索 TestFlight)
^https:\/\/duckduckgo.com\/\?q=tf(\+|%20)([^&]+).+ url 302 https://www.google.com/search?as_q=$2&as_sitesearch=testflight.apple.com
# wb: 微博
^https:\/\/duckduckgo.com\/\?q=wb\+([^&]+).+ url 302 https://s.weibo.com/weibo/$1
# wx: 微信
^https:\/\/duckduckgo.com\/\?q=wx\+([^&]+).+ url 302 https://weixin.sogou.com/weixinwap?query=$1
# jd : 京东
^https:\/\/duckduckgo.com\/\?q=jd\+([^&]+).+ url 302 https://so.m.jd.com/ware/search.action?keyword=$1
# tb: 淘宝
^https:\/\/duckduckgo.com\/\?q=tb\+([^&]+).+ url 302 https://s.m.taobao.com/h5?q=$1
# tm: 天猫
^https:\/\/duckduckgo.com\/\?q=tm\+([^&]+).+ url 302 https://s.m.tmall.com/m/search.htm?q=$1
# ytb  (YouTube)
^https:\/\/duckduckgo.com\/\?q=ytb\+([^&]+).+ url 302 https://www.youtube.com/results?search_query=$1
# ph  (PornHub) 
^https:\/\/duckduckgo.com\/\?q=ph\+([^&]+).+ url 302 https://cn.pornhub.com/video/search?search=$1
# bi: 必应
^https:\/\/duckduckgo.com\/\?q=bi\+([^&]+).+ url 302 https://cn.bing.com/search?q=$1
# bd: 百度
^https:\/\/duckduckgo.com\/\?q=bd\+([^&]+).+ url 302 https://www.baidu.com/s?wd=$1
# ddg: DuckDuckGo 
^https:\/\/duckduckgo.com\/\?q=ddg\+([^&]+).+ url 302 https://duckduckgo.com/?ia=about&q=$1
# 无指令: 谷歌
^https:\/\/duckduckgo.com\/\?q=([^&]+).+ url 302 https://www.google.com/search?q=$1

# 阻止google.com 跳转到google.com.hk
^https?:\/\/(www\.)?g\.cn url 302 https://www.google.com
^https?:\/\/(www\.)?google\.cn url 302 https://www.google.com
# TestFlight下载修正
^https?:\/\/testflight\.apple\.com\/v\d\/accounts\/.+?\/install$ url script-request-body https://gist.githubusercontent.com/NobyDa/9be418b93afc5e9c8a8f4d28ae403cf2/raw/TF_Download.js
# 百度搜索防跳转
^https?\:\/\/boxer\.baidu\.com\/scheme\?scheme url script-response-body https://raw.githubusercontent.com/app2smile/rules/master/js/baidu-no-redirect.js
# Web豆瓣电影和电视剧添加便捷播放按钮
^https?:\/\/m\.douban\.com\/movie\/subject\/\d+\/ url script-response-body https://raw.githubusercontent.com/I-am-R-E/QuantumultX/main/JavaScript/DouBan.js


[task_local]
# GeoIP查询
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/geo_location.js, tag=GeoIP 查询, img-url=location.fill.viewfinder.system, enabled=true

# Google切换
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/switch-check-google.js, tag=Google 切换, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google.png, enabled=true

# YouTube查询
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/ytb-ui-check.js, tag=YouTube 查询, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube_Letter.png, enabled=true

# YouTube切换
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/switch-check-ytb.js, tag=YouTube 切换, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube_Letter.png, enabled=true

# 流媒体服务查询
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=流媒体服务查询, img-url=checkmark.seal.system, enabled=true

# 网易云音乐解锁节点查询
event-interaction https://raw.githubusercontent.com/I-am-R-E/QuantumultX/main/TaskLocal/NeteaseMusicUnlockCheck.js, tag=网易音乐查询, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Netease_Music_Unlock.png, enabled=true


[http_backend]
https://raw.githubusercontent.com/chavyleung/scripts/master/chavy.box.js, tag=BoxJS, path=^/, enabled=true


[mitm]
skip_validating_cert = true
hostname = api.weibo.cn, mapi.weibo.com, *.uve.weibo.com, -*.weibo.com, mp.weixin.qq.com, security.wechat.com, weixin110.qq.com, vip1.kuwo.cn, duckduckgo.com, *.google.cn, *.google.com.hk, testflight.apple.com, boxer.baidu.com, pan.baidu.com, m.douban.com
